<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Reading and Analyzing DataVolley Scouting Files • datavolley</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Reading and Analyzing DataVolley Scouting Files">
<meta property="og:description" content="Provides functions for parsing and working with volleyball match files in DataVolley format.">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">datavolley</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.13.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div id="datavolley" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#datavolley" class="anchor"></a>datavolley</h1></div>
<p><a href="https://travis-ci.org/openvolley/datavolley"><img src="https://travis-ci.org/openvolley/datavolley.svg?branch=master" alt="Travis-CI Build Status"></a> <a href="https://www.tidyverse.org/lifecycle/#stable"><img src="https://img.shields.io/badge/lifecycle-stable-brightgreen.svg" alt="lifecycle"></a> <img src="https://img.shields.io/badge/openvolley-blue.svg?logo=data:image/svg%2bxml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMTAiIGhlaWdodD0iMjEwIj48cGF0aCBkPSJNOTcuODMzIDE4Ny45OTdjLTQuNTUtLjM5Ni0xMi44MTItMS44ODYtMTMuNTgxLTIuNDQ5LS4yNDItLjE3Ny0xLjY5Mi0uNzUzLTMuMjIyLTEuMjgxLTI4LjY5Ni05Ljg5NS0zNS4xNy00NS45ODctMTMuODY4LTc3LjMyMyAyLjY3Mi0zLjkzIDIuNTc5LTQuMTktMS4zOTQtMy45MDYtMTIuNjQxLjktMjcuMiA2Ljk1Mi0zMy4wNjYgMTMuNzQ1LTUuOTg0IDYuOTI3LTcuMzI3IDE0LjUwNy00LjA1MiAyMi44NjIuNzE2IDEuODI2LS45MTgtLjE3LTEuODktMi4zMS03LjM1Mi0xNi4xNzQtOS4xODEtMzguNTYtNC4zMzctNTMuMDc0LjY5MS0yLjA3IDEuNDE1LTMuODY2IDEuNjEtMy45ODkuMTk0LS4xMjMuNzgyLTEuMDUzIDEuMzA3LTIuMDY2IDMuOTQ1LTcuNjE3IDkuNDU4LTEyLjg2MiAxNy44MzktMTYuOTcgMTIuMTcyLTUuOTY4IDI1LjU3NS01LjgyNCA0MS40My40NDUgNi4zMSAyLjQ5NSA4LjgwMiAzLjgwMSAxNi4wNDcgOC40MTMgNC4zNCAyLjc2MiA0LjIxMiAyLjg3NCAzLjU5NC0zLjE3My0yLjgyNi0yNy42ODEtMTYuOTA3LTQyLjE4NS0zNi4wNjgtMzcuMTUxLTQuMjU0IDEuMTE3IDUuMjQtMy4zMzggMTEuNjYtNS40NzMgMTMuMTgtNC4zOCAzOC45MzctNS43NzIgNDYuMDc0LTEuNDg4IDEuMjQ3LjU0NyAyLjIyOCAxLjA5NSAzLjI3NSAxLjYzIDQuMjkgMi4xMDcgMTEuNzMzIDcuNjk4IDE0LjI2NSAxMS40MjcuNDA3LjYgMS4yNyAxLjg2NiAxLjkxNyAyLjgxNCAxMS4zMDggMTYuNTY1IDguNjIzIDQxLjkxLTYuODM4IDY0LjU1Mi0zLjI0OSA0Ljc1OC0zLjI1OCA0Ljc0MiAyLjQ1IDQuMDE4IDMyLjQ4Mi00LjEyMiA0OC41MTUtMjEuOTM1IDM5LjU3OC00My45NzQtMS4xNC0yLjgwOSAxLjU2NiAxLjA2IDMuNTE4IDUuMDMyIDI5LjY5MyA2MC40MTctMjIuNTggMTA3Ljg1My03OS40OTggNzIuMTQzLTUuMDg0LTMuMTktNS4xMjMtMy4xNTItMy45MDIgMy44ODMgNC43MjEgMjcuMjIgMjUuNzgzIDQzLjU2MiA0NC4wODkgMzQuMjEgMS4zNjItLjY5NiAyLjIxLS43NSAyLjIxLS4xNDMtNi43NiAzLjg1Ny0xNi4wMTggNi41NTMtMjMuMTI2IDguMDkxLTcuNTU1IDEuNTQ3LTE4LjM2NiAyLjE3Mi0yNi4wMiAxLjUwNnoiIGZpbGw9IiNmZmYiLz48ZWxsaXBzZSBjeD0iMTA1Ljk3NSIgY3k9IjEwNC40NDEiIHJ4PSI5NC44NCIgcnk9IjkyLjU0MiIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjZmZmIiBzdHJva2Utd2lkdGg9IjEwLjc0Ii8+PC9zdmc+" alt="openvolley"></p>
<p>An R package for reading DataVolley scouting files.</p>
<p>See also this <a href="https://apps.untan.gl/dvalidate/">DataVolley file validator</a> and <a href="https://apps.untan.gl/">suite of analytical apps</a>, which are built on the datavolley package.</p>
<p>The <a href="https://github.com/openvolley/peranavolley">peranavolley</a> package provides similar functionality for reading files scouted by the <a href="http://peranasports.com/software/vbstatshd/">AOC VBStats</a> software.</p>
<p><strong>NOTE:</strong> recent updates have included substantial changes to the way that text encoding is handled, including the way that the correct encoding is guessed with <code><a href="reference/read_dv.html">read_dv(..., text_encoding = "guess")</a></code>. Text encoding should work better now, particular on Windows. Please <a href="https://github.com/openvolley/datavolley/issues/new">submit an issue</a> if you find problems related to text encoding (e.g. player or team names not displaying correctly).</p>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(remotes)</span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="kw"><a href="https://rdrr.io/pkg/remotes/man/install_github.html">install_github</a></span>(<span class="st">"openvolley/datavolley"</span>)</span></code></pre></div>
</div>
<div id="example" class="section level2">
<h2 class="hasAnchor">
<a href="#example" class="anchor"></a>Example</h2>
<p>Read one of the example data files bundled with the package:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(datavolley)</span>
<span id="cb2-2"><a href="#cb2-2"></a>x &lt;-<span class="st"> </span><span class="kw"><a href="reference/read_dv.html">read_dv</a></span>(<span class="kw"><a href="reference/dv_example_file.html">dv_example_file</a></span>(), <span class="dt">insert_technical_timeouts =</span> <span class="ot">FALSE</span>)</span>
<span id="cb2-3"><a href="#cb2-3"></a><span class="kw"><a href="https://rdrr.io/r/base/summary.html">summary</a></span>(x)</span>
<span id="cb2-4"><a href="#cb2-4"></a><span class="co">#&gt; Match summary:</span></span>
<span id="cb2-5"><a href="#cb2-5"></a><span class="co">#&gt; Date: 2015-01-25</span></span>
<span id="cb2-6"><a href="#cb2-6"></a><span class="co">#&gt; League: Finale mladinke</span></span>
<span id="cb2-7"><a href="#cb2-7"></a><span class="co">#&gt; Teams: Braslovče (JERONČIČ ZORAN/MIHALINEC DAMIJANA)</span></span>
<span id="cb2-8"><a href="#cb2-8"></a><span class="co">#&gt;        vs</span></span>
<span id="cb2-9"><a href="#cb2-9"></a><span class="co">#&gt;        Nova KBM Branik (HAFNER MATJAŽ)</span></span>
<span id="cb2-10"><a href="#cb2-10"></a><span class="co">#&gt; Result: 3-0 (25-16, 25-14, 25-22)</span></span>
<span id="cb2-11"><a href="#cb2-11"></a><span class="co">#&gt; Duration: 67 minutes</span></span></code></pre></div>
<p>Note that if you are working with files that were scouted by VolleyMetrics, they use some conventions in their files that differ from standard DataVolley usage. There is an option to tell <code>read_dv</code> to follow their conventions:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a>x &lt;-<span class="st"> </span><span class="kw"><a href="reference/read_dv.html">read_dv</a></span>(<span class="st">"/your/file.dvw"</span>, <span class="dt">skill_evaluation_decode =</span> <span class="st">"volleymetrics"</span>)</span></code></pre></div>
<p>Number of serves by team:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a>serve_idx &lt;-<span class="st"> </span><span class="kw"><a href="reference/find_serves.html">find_serves</a></span>(<span class="kw"><a href="reference/plays.html">plays</a></span>(x))</span>
<span id="cb4-2"><a href="#cb4-2"></a><span class="kw"><a href="https://rdrr.io/r/base/table.html">table</a></span>(<span class="kw"><a href="reference/plays.html">plays</a></span>(x)<span class="op">$</span>team[serve_idx])</span>
<span id="cb4-3"><a href="#cb4-3"></a><span class="co">#&gt; </span></span>
<span id="cb4-4"><a href="#cb4-4"></a><span class="co">#&gt;       Braslovče Nova KBM Branik </span></span>
<span id="cb4-5"><a href="#cb4-5"></a><span class="co">#&gt;              74              54</span></span></code></pre></div>
<p>Distribution of serve run lengths:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a>serve_run_info &lt;-<span class="st"> </span><span class="kw"><a href="reference/find_runs.html">find_runs</a></span>(<span class="kw"><a href="reference/plays.html">plays</a></span>(x)[serve_idx, ])</span>
<span id="cb5-2"><a href="#cb5-2"></a><span class="kw"><a href="https://rdrr.io/r/base/table.html">table</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/unique.html">unique</a></span>(serve_run_info[, <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"run_id"</span>, <span class="st">"run_length"</span>)])<span class="op">$</span>run_length)</span>
<span id="cb5-3"><a href="#cb5-3"></a><span class="co">#&gt; </span></span>
<span id="cb5-4"><a href="#cb5-4"></a><span class="co">#&gt;  1  2  3  4  5  7  8 </span></span>
<span id="cb5-5"><a href="#cb5-5"></a><span class="co">#&gt; 34 16  7  4  1  1  1</span></span></code></pre></div>
<p>The court position associated with each action can be recorded in two ways. The most common is by zones (numbered 1-9).</p>
<p>Heatmap of attack rate by court zone (where the attack was made from):</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(ggplot2)</span>
<span id="cb6-2"><a href="#cb6-2"></a><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(dplyr)</span>
<span id="cb6-3"><a href="#cb6-3"></a><span class="co">## calculate attack frequency by zone, per team</span></span>
<span id="cb6-4"><a href="#cb6-4"></a>attack_rate &lt;-<span class="st"> </span><span class="kw"><a href="reference/plays.html">plays</a></span>(x) <span class="op">%&gt;%</span><span class="st"> </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(skill <span class="op">==</span><span class="st"> "Attack"</span>) <span class="op">%&gt;%</span></span>
<span id="cb6-5"><a href="#cb6-5"></a><span class="st">    </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span>(team, start_zone) <span class="op">%&gt;%</span><span class="st"> </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize</a></span>(<span class="dt">n_attacks =</span> <span class="kw"><a href="https://dplyr.tidyverse.org/reference/n.html">n</a></span>()) <span class="op">%&gt;%</span></span>
<span id="cb6-6"><a href="#cb6-6"></a><span class="st">    </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="dt">rate =</span> n_attacks<span class="op">/</span><span class="kw"><a href="https://rdrr.io/r/base/sum.html">sum</a></span>(n_attacks)) <span class="op">%&gt;%</span><span class="st"> </span>ungroup</span>
<span id="cb6-7"><a href="#cb6-7"></a></span>
<span id="cb6-8"><a href="#cb6-8"></a><span class="co">## add x, y coordinates associated with the zones</span></span>
<span id="cb6-9"><a href="#cb6-9"></a>attack_rate &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/cbind.html">cbind</a></span>(attack_rate, <span class="kw"><a href="reference/dv_xy.html">dv_xy</a></span>(attack_rate<span class="op">$</span>start_zone, <span class="dt">end =</span> <span class="st">"lower"</span>))</span>
<span id="cb6-10"><a href="#cb6-10"></a></span>
<span id="cb6-11"><a href="#cb6-11"></a><span class="co">## for team 2, these need to be on the top half of the diagram</span></span>
<span id="cb6-12"><a href="#cb6-12"></a>tm2i &lt;-<span class="st"> </span>attack_rate<span class="op">$</span>team <span class="op">==</span><span class="st"> </span><span class="kw"><a href="reference/teams.html">teams</a></span>(x)[<span class="dv">2</span>]</span>
<span id="cb6-13"><a href="#cb6-13"></a>attack_rate[tm2i, <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"x"</span>, <span class="st">"y"</span>)] &lt;-<span class="st"> </span><span class="kw"><a href="reference/dv_flip_xy.html">dv_flip_xy</a></span>(attack_rate[tm2i, <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"x"</span>, <span class="st">"y"</span>)])</span>
<span id="cb6-14"><a href="#cb6-14"></a></span>
<span id="cb6-15"><a href="#cb6-15"></a><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span>(attack_rate, <span class="kw"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(x, y, <span class="dt">fill =</span> rate)) <span class="op">+</span><span class="st"> </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/geom_tile.html">geom_tile</a></span>() <span class="op">+</span><span class="st"> </span><span class="kw"><a href="reference/ggcourt.html">ggcourt</a></span>(<span class="dt">labels =</span> <span class="kw"><a href="reference/teams.html">teams</a></span>(x)) <span class="op">+</span></span>
<span id="cb6-16"><a href="#cb6-16"></a><span class="st">    </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/scale_gradient.html">scale_fill_gradient2</a></span>(<span class="dt">name =</span> <span class="st">"Attack rate"</span>)</span></code></pre></div>
<p><img src="reference/figures/README-unnamed-chunk-6-1.png"><!-- --></p>
<p>If you prefer a more colourful court, check the <code>court_colour = "indoor"</code> option. Note that we make two calls to <code>ggcourt</code> in this example, one with <code>background_only = TRUE</code> to plot just the court background colours, and again with <code>foreground_only = TRUE</code> to add the grid lines and labels. Making two calls allows us to control the layer order, so that the court colours are behind the heatmap, but the grid lines are on top of it:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span>(attack_rate, <span class="kw"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(x, y, <span class="dt">fill =</span> rate)) <span class="op">+</span></span>
<span id="cb7-2"><a href="#cb7-2"></a><span class="st">    </span><span class="co">## plot just the background court colour</span></span>
<span id="cb7-3"><a href="#cb7-3"></a><span class="st">    </span><span class="kw"><a href="reference/ggcourt.html">ggcourt</a></span>(<span class="dt">court_colour =</span> <span class="st">"indoor"</span>, <span class="dt">background_only =</span> <span class="ot">TRUE</span>) <span class="op">+</span></span>
<span id="cb7-4"><a href="#cb7-4"></a><span class="st">    </span><span class="co">## add the heatmap</span></span>
<span id="cb7-5"><a href="#cb7-5"></a><span class="st">    </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/geom_tile.html">geom_tile</a></span>() <span class="op">+</span></span>
<span id="cb7-6"><a href="#cb7-6"></a><span class="st">    </span><span class="co">## now add the grid lines and labels</span></span>
<span id="cb7-7"><a href="#cb7-7"></a><span class="st">    </span><span class="kw"><a href="reference/ggcourt.html">ggcourt</a></span>(<span class="dt">labels =</span> <span class="kw"><a href="reference/teams.html">teams</a></span>(x), <span class="dt">court_colour =</span> <span class="st">"indoor"</span>, <span class="dt">foreground_only =</span> <span class="ot">TRUE</span>) <span class="op">+</span></span>
<span id="cb7-8"><a href="#cb7-8"></a><span class="st">    </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/scale_gradient.html">scale_fill_gradient2</a></span>(<span class="dt">name =</span> <span class="st">"Attack rate"</span>)</span></code></pre></div>
<p><img src="reference/figures/README-indoor1-1.png"><!-- --></p>
<p>Heatmap of where attacks ended, using only attacks by Nova KBM Branik from position 4:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a><span class="co">## calculate attack frequency by zone, per team</span></span>
<span id="cb8-2"><a href="#cb8-2"></a>attack_rate &lt;-<span class="st"> </span><span class="kw"><a href="reference/plays.html">plays</a></span>(x) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb8-3"><a href="#cb8-3"></a><span class="st">    </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(team <span class="op">==</span><span class="st"> "Nova KBM Branik"</span> <span class="op">&amp;</span><span class="st"> </span>skill <span class="op">==</span><span class="st"> "Attack"</span> <span class="op">&amp;</span><span class="st"> </span>start_zone <span class="op">==</span><span class="st"> </span><span class="dv">4</span>) <span class="op">%&gt;%</span></span>
<span id="cb8-4"><a href="#cb8-4"></a><span class="st">    </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span>(end_zone) <span class="op">%&gt;%</span><span class="st"> </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize</a></span>(<span class="dt">n_attacks =</span> <span class="kw"><a href="https://dplyr.tidyverse.org/reference/n.html">n</a></span>()) <span class="op">%&gt;%</span></span>
<span id="cb8-5"><a href="#cb8-5"></a><span class="st">    </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="dt">rate =</span> n_attacks<span class="op">/</span><span class="kw"><a href="https://rdrr.io/r/base/sum.html">sum</a></span>(n_attacks)) <span class="op">%&gt;%</span><span class="st"> </span>ungroup</span>
<span id="cb8-6"><a href="#cb8-6"></a>attack_rate &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/cbind.html">cbind</a></span>(attack_rate, <span class="kw"><a href="reference/dv_xy.html">dv_xy</a></span>(attack_rate<span class="op">$</span>end_zone, <span class="dt">end =</span> <span class="st">"lower"</span>))</span>
<span id="cb8-7"><a href="#cb8-7"></a><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span>(attack_rate, <span class="kw"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(x, y, <span class="dt">fill =</span> rate)) <span class="op">+</span><span class="st"> </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/geom_tile.html">geom_tile</a></span>() <span class="op">+</span><span class="st"> </span><span class="kw"><a href="reference/ggcourt.html">ggcourt</a></span>(<span class="st">"lower"</span>, <span class="dt">labels =</span> <span class="ot">NULL</span>) <span class="op">+</span></span>
<span id="cb8-8"><a href="#cb8-8"></a><span class="st">    </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/scale_gradient.html">scale_fill_gradient2</a></span>(<span class="dt">name =</span> <span class="st">"Rate: attack</span><span class="ch">\n</span><span class="st">end location"</span>)</span>
<span id="cb8-9"><a href="#cb8-9"></a><span class="co">#&gt; Warning: Removed 1 rows containing missing values (geom_tile).</span></span></code></pre></div>
<p><img src="reference/figures/README-unnamed-chunk-7-1.png"><!-- --></p>
<p>We can also use the end subzone information, if it has been recorded. The subzones divide each zone into four, so we get higher spatial resolution (but the subzone is not always scouted). The same plot as above, but using subzones:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a>attack_rate &lt;-<span class="st"> </span><span class="kw"><a href="reference/plays.html">plays</a></span>(x) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb9-2"><a href="#cb9-2"></a><span class="st">    </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(team <span class="op">!=</span><span class="st"> "Nova KBM Branik"</span> <span class="op">&amp;</span><span class="st"> </span>skill <span class="op">==</span><span class="st"> "Attack"</span> <span class="op">&amp;</span><span class="st"> </span>start_zone <span class="op">==</span><span class="st"> </span><span class="dv">4</span> <span class="op">&amp;</span><span class="st"> </span><span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span>(end_subzone)) <span class="op">%&gt;%</span></span>
<span id="cb9-3"><a href="#cb9-3"></a><span class="st">    </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span>(end_zone, end_subzone) <span class="op">%&gt;%</span><span class="st"> </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize</a></span>(<span class="dt">n_attacks =</span> <span class="kw"><a href="https://dplyr.tidyverse.org/reference/n.html">n</a></span>()) <span class="op">%&gt;%</span></span>
<span id="cb9-4"><a href="#cb9-4"></a><span class="st">    </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="dt">rate =</span> n_attacks<span class="op">/</span><span class="kw"><a href="https://rdrr.io/r/base/sum.html">sum</a></span>(n_attacks)) <span class="op">%&gt;%</span><span class="st"> </span>ungroup</span>
<span id="cb9-5"><a href="#cb9-5"></a>attack_rate &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/cbind.html">cbind</a></span>(attack_rate, <span class="kw"><a href="reference/dv_xy.html">dv_xy</a></span>(attack_rate<span class="op">$</span>end_zone, <span class="dt">end =</span> <span class="st">"lower"</span>, <span class="dt">subzones =</span> attack_rate<span class="op">$</span>end_subzone))</span>
<span id="cb9-6"><a href="#cb9-6"></a><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span>(attack_rate, <span class="kw"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(x, y, <span class="dt">fill =</span> rate)) <span class="op">+</span><span class="st"> </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/geom_tile.html">geom_tile</a></span>() <span class="op">+</span><span class="st"> </span><span class="kw"><a href="reference/ggcourt.html">ggcourt</a></span>(<span class="st">"lower"</span>, <span class="dt">labels =</span> <span class="ot">NULL</span>) <span class="op">+</span></span>
<span id="cb9-7"><a href="#cb9-7"></a><span class="st">    </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/scale_gradient.html">scale_fill_gradient2</a></span>(<span class="dt">name =</span> <span class="st">"Rate: attack</span><span class="ch">\n</span><span class="st">end location"</span>)</span></code></pre></div>
<p><img src="reference/figures/README-unnamed-chunk-8-1.png"><!-- --></p>
<p>Or using arrows to show the starting and ending zones of attacks:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1"></a><span class="co">## first tabulate attacks by starting and ending zone</span></span>
<span id="cb10-2"><a href="#cb10-2"></a>attack_rate &lt;-<span class="st"> </span><span class="kw"><a href="reference/plays.html">plays</a></span>(x) <span class="op">%&gt;%</span><span class="st"> </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(team <span class="op">==</span><span class="st"> </span><span class="kw"><a href="reference/teams.html">teams</a></span>(x)[<span class="dv">1</span>] <span class="op">&amp;</span><span class="st"> </span>skill <span class="op">==</span><span class="st"> "Attack"</span>) <span class="op">%&gt;%</span></span>
<span id="cb10-3"><a href="#cb10-3"></a><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span>(start_zone, end_zone) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/tally.html">tally</a></span>() <span class="op">%&gt;%</span><span class="st"> </span>ungroup</span>
<span id="cb10-4"><a href="#cb10-4"></a></span>
<span id="cb10-5"><a href="#cb10-5"></a><span class="co">## convert counts to rates</span></span>
<span id="cb10-6"><a href="#cb10-6"></a>attack_rate<span class="op">$</span>rate &lt;-<span class="st"> </span>attack_rate<span class="op">$</span>n<span class="op">/</span><span class="kw"><a href="https://rdrr.io/r/base/sum.html">sum</a></span>(attack_rate<span class="op">$</span>n)</span>
<span id="cb10-7"><a href="#cb10-7"></a></span>
<span id="cb10-8"><a href="#cb10-8"></a><span class="co">## discard zones with zero attacks or missing location information</span></span>
<span id="cb10-9"><a href="#cb10-9"></a>attack_rate &lt;-<span class="st"> </span>attack_rate <span class="op">%&gt;%</span><span class="st"> </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(rate<span class="op">&gt;</span><span class="dv">0</span> <span class="op">&amp;</span><span class="st"> </span><span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span>(start_zone) <span class="op">&amp;</span><span class="st"> </span><span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span>(end_zone))</span>
<span id="cb10-10"><a href="#cb10-10"></a></span>
<span id="cb10-11"><a href="#cb10-11"></a><span class="co">## add starting x, y coordinates</span></span>
<span id="cb10-12"><a href="#cb10-12"></a>attack_rate &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/cbind.html">cbind</a></span>(attack_rate, <span class="kw"><a href="reference/dv_xy.html">dv_xy</a></span>(attack_rate<span class="op">$</span>start_zone, <span class="dt">end =</span> <span class="st">"lower"</span>, <span class="dt">xynames =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"sx"</span>, <span class="st">"sy"</span>)))</span>
<span id="cb10-13"><a href="#cb10-13"></a></span>
<span id="cb10-14"><a href="#cb10-14"></a><span class="co">## and ending x, y coordinates</span></span>
<span id="cb10-15"><a href="#cb10-15"></a>attack_rate &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/cbind.html">cbind</a></span>(attack_rate, <span class="kw"><a href="reference/dv_xy.html">dv_xy</a></span>(attack_rate<span class="op">$</span>end_zone, <span class="dt">end =</span> <span class="st">"upper"</span>, <span class="dt">xynames =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"ex"</span>, <span class="st">"ey"</span>)))</span>
<span id="cb10-16"><a href="#cb10-16"></a></span>
<span id="cb10-17"><a href="#cb10-17"></a><span class="co">## plot in reverse order so largest arrows are on the bottom</span></span>
<span id="cb10-18"><a href="#cb10-18"></a>attack_rate &lt;-<span class="st"> </span>attack_rate <span class="op">%&gt;%</span><span class="st"> </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span>(<span class="kw"><a href="https://dplyr.tidyverse.org/reference/desc.html">desc</a></span>(rate))</span>
<span id="cb10-19"><a href="#cb10-19"></a></span>
<span id="cb10-20"><a href="#cb10-20"></a>p &lt;-<span class="st"> </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span>(attack_rate, <span class="kw"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(x, y, <span class="dt">col =</span> rate)) <span class="op">+</span><span class="st"> </span><span class="kw"><a href="reference/ggcourt.html">ggcourt</a></span>(<span class="dt">labels =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="kw"><a href="reference/teams.html">teams</a></span>(x)[<span class="dv">1</span>], <span class="st">""</span>), <span class="dt">court_colour =</span> <span class="st">"indoor"</span>)</span>
<span id="cb10-21"><a href="#cb10-21"></a><span class="cf">for</span> (n <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span>(attack_rate))</span>
<span id="cb10-22"><a href="#cb10-22"></a>    p &lt;-<span class="st"> </span>p <span class="op">+</span><span class="st"> </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_path</a></span>(<span class="dt">data =</span> <span class="kw"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span>(<span class="dt">x =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(attack_rate<span class="op">$</span>sx[n], attack_rate<span class="op">$</span>ex[n]),</span>
<span id="cb10-23"><a href="#cb10-23"></a>                                         <span class="dt">y =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(attack_rate<span class="op">$</span>sy[n], attack_rate<span class="op">$</span>ey[n]),</span>
<span id="cb10-24"><a href="#cb10-24"></a>                                         <span class="dt">rate =</span> attack_rate<span class="op">$</span>rate[n]),</span>
<span id="cb10-25"><a href="#cb10-25"></a>                       <span class="kw"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(<span class="dt">size =</span> rate), <span class="dt">lineend =</span> <span class="st">"round"</span>,</span>
<span id="cb10-26"><a href="#cb10-26"></a>                       <span class="dt">arrow =</span> <span class="kw"><a href="https://ggplot2.tidyverse.org/reference/reexports.html">arrow</a></span>(<span class="dt">length =</span> <span class="kw"><a href="https://ggplot2.tidyverse.org/reference/reexports.html">unit</a></span>(<span class="dv">2</span>, <span class="st">"mm"</span>), <span class="dt">type =</span> <span class="st">"closed"</span>, <span class="dt">angle =</span> <span class="dv">20</span>, <span class="dt">ends =</span> <span class="st">"last"</span>))</span>
<span id="cb10-27"><a href="#cb10-27"></a>p <span class="op">+</span><span class="st"> </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/scale_gradient.html">scale_colour_gradient</a></span>(<span class="dt">name =</span> <span class="st">"Attack rate"</span>) <span class="op">+</span><span class="st"> </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/guides.html">guides</a></span>(<span class="dt">size =</span> <span class="st">"none"</span>)</span></code></pre></div>
<p><img src="reference/figures/README-unnamed-chunk-9-1.png"><!-- --></p>
<p>Another source of position data is court coordinates. These are not included in all data files, because generally they must be manually entered by the scout and this can be a time consuming process. For the purposes of demonstration, here we generate fake coordinate data:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1"></a><span class="co">## take just the serves from the play-by-play data</span></span>
<span id="cb11-2"><a href="#cb11-2"></a>xserves &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/subset.html">subset</a></span>(<span class="kw"><a href="reference/plays.html">plays</a></span>(x), skill <span class="op">==</span><span class="st"> "Serve"</span>)</span>
<span id="cb11-3"><a href="#cb11-3"></a></span>
<span id="cb11-4"><a href="#cb11-4"></a><span class="co">## if the file had been scouted with coordinate included, we could plot them directly</span></span>
<span id="cb11-5"><a href="#cb11-5"></a><span class="co">## this file has no coordinates, so we'll fake some up for demo purposes</span></span>
<span id="cb11-6"><a href="#cb11-6"></a>coords &lt;-<span class="st"> </span><span class="kw"><a href="reference/dv_fake_coordinates.html">dv_fake_coordinates</a></span>(<span class="st">"serve"</span>, xserves<span class="op">$</span>evaluation)</span>
<span id="cb11-7"><a href="#cb11-7"></a>xserves[, <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"start_coordinate"</span>, <span class="st">"start_coordinate_x"</span>, <span class="st">"start_coordinate_y"</span>,</span>
<span id="cb11-8"><a href="#cb11-8"></a>            <span class="st">"end_coordinate"</span>, <span class="st">"end_coordinate_x"</span>, <span class="st">"end_coordinate_y"</span>)] &lt;-<span class="st"> </span>coords</span>
<span id="cb11-9"><a href="#cb11-9"></a></span>
<span id="cb11-10"><a href="#cb11-10"></a><span class="co">## now we can plot these</span></span>
<span id="cb11-11"><a href="#cb11-11"></a>xserves<span class="op">$</span>evaluation[<span class="op">!</span>xserves<span class="op">$</span>evaluation <span class="op">%in%</span><span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Ace"</span>, <span class="st">"Error"</span>)] &lt;-<span class="st"> "Other"</span></span>
<span id="cb11-12"><a href="#cb11-12"></a></span>
<span id="cb11-13"><a href="#cb11-13"></a><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span>(xserves, <span class="kw"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(start_coordinate_x, start_coordinate_y,</span>
<span id="cb11-14"><a href="#cb11-14"></a>       <span class="dt">xend =</span> end_coordinate_x, <span class="dt">yend =</span> end_coordinate_y, <span class="dt">colour =</span> evaluation)) <span class="op">+</span></span>
<span id="cb11-15"><a href="#cb11-15"></a><span class="st">    </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/geom_segment.html">geom_segment</a></span>(<span class="dt">arrow =</span> <span class="kw"><a href="https://ggplot2.tidyverse.org/reference/reexports.html">arrow</a></span>(<span class="dt">length =</span> <span class="kw"><a href="https://ggplot2.tidyverse.org/reference/reexports.html">unit</a></span>(<span class="dv">2</span>, <span class="st">"mm"</span>), <span class="dt">type =</span> <span class="st">"closed"</span>, <span class="dt">angle =</span> <span class="dv">20</span>)) <span class="op">+</span></span>
<span id="cb11-16"><a href="#cb11-16"></a><span class="st">    </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html">scale_colour_manual</a></span>(<span class="dt">values =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dt">Ace =</span> <span class="st">"limegreen"</span>, <span class="dt">Error =</span> <span class="st">"firebrick"</span>, <span class="dt">Other =</span> <span class="st">"dodgerblue"</span>),</span>
<span id="cb11-17"><a href="#cb11-17"></a>                        <span class="dt">name =</span> <span class="st">"Evaluation"</span>) <span class="op">+</span></span>
<span id="cb11-18"><a href="#cb11-18"></a><span class="st">    </span><span class="kw"><a href="reference/ggcourt.html">ggcourt</a></span>(<span class="dt">labels =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Serving team"</span>, <span class="st">"Receiving team"</span>))</span></code></pre></div>
<p><img src="reference/figures/README-unnamed-chunk-10-1.png"><!-- --></p>
<p>We could also use these coordinates to generate a heatmap-style plot of serve location:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1"></a><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span>(xserves, <span class="kw"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(start_coordinate_x, start_coordinate_y)) <span class="op">+</span></span>
<span id="cb12-2"><a href="#cb12-2"></a><span class="st">    </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/geom_density_2d.html">stat_density_2d</a></span>(<span class="dt">geom =</span> <span class="st">"raster"</span>, <span class="kw"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(<span class="dt">fill =</span> ..density..), <span class="dt">contour =</span> <span class="ot">FALSE</span>) <span class="op">+</span></span>
<span id="cb12-3"><a href="#cb12-3"></a><span class="st">    </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/scale_brewer.html">scale_fill_distiller</a></span>(<span class="dt">palette =</span> <span class="dv">1</span>, <span class="dt">direction =</span> <span class="dv">1</span>, <span class="dt">name =</span> <span class="st">"Density"</span>) <span class="op">+</span></span>
<span id="cb12-4"><a href="#cb12-4"></a><span class="st">    </span><span class="kw"><a href="reference/ggcourt.html">ggcourt</a></span>(<span class="st">"lower"</span>, <span class="dt">labels =</span> <span class="st">"Serving team"</span>)</span></code></pre></div>
<p><img src="reference/figures/README-unnamed-chunk-11-1.png"><!-- --></p>
<div id="analyzing-multiple-files-at-once" class="section level3">
<h3 class="hasAnchor">
<a href="#analyzing-multiple-files-at-once" class="anchor"></a>Analyzing multiple files at once</h3>
<p>You might want to read multiple files in and analyze them all together. First find all of the DataVolley files in the target directory:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1"></a>d &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.files.html">dir</a></span>(<span class="st">"c:/data"</span>, <span class="dt">pattern =</span> <span class="st">"dvw$"</span>, <span class="dt">full.names =</span> <span class="ot">TRUE</span>)</span>
<span id="cb13-2"><a href="#cb13-2"></a><span class="co">## if your files are in nested directories, add 'recursive = TRUE' to the arguments</span></span></code></pre></div>
<p>Read all of those files in a loop, extract the play-by-play component from each, and then join of those all together:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1"></a>lx &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>()</span>
<span id="cb14-2"><a href="#cb14-2"></a><span class="cf">for</span> (fi <span class="cf">in</span> <span class="kw"><a href="https://rdrr.io/r/base/seq.html">seq_along</a></span>(d)) lx[[fi]] &lt;-<span class="st"> </span><span class="kw"><a href="reference/plays.html">plays</a></span>(<span class="kw"><a href="reference/read_dv.html">read_dv</a></span>(d[fi]))</span>
<span id="cb14-3"><a href="#cb14-3"></a>px &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/do.call.html">do.call</a></span>(rbind, lx)</span></code></pre></div>
<p>(Note, the idiomatic R way to do this would be to use <code>lapply</code> instead of a <code>for</code> loop:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1"></a>lx &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/lapply.html">lapply</a></span>(d, read_dv)</span>
<span id="cb15-2"><a href="#cb15-2"></a>px &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/do.call.html">do.call</a></span>(rbind, <span class="kw"><a href="https://rdrr.io/r/base/lapply.html">lapply</a></span>(lx, plays))</span></code></pre></div>
<p>It achieves the same thing. Use whichever you prefer.)</p>
<p>And then we could get dataset-wide statistics, for example reception error rate by team:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1"></a><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(dplyr)</span>
<span id="cb16-2"><a href="#cb16-2"></a>px <span class="op">%&gt;%</span><span class="st"> </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(skill <span class="op">==</span><span class="st"> "Reception"</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span>(team) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb16-3"><a href="#cb16-3"></a><span class="st">  </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize</a></span>(<span class="dt">N_receptions =</span> <span class="kw"><a href="https://dplyr.tidyverse.org/reference/n.html">n</a></span>(), <span class="dt">error_rate =</span> <span class="kw"><a href="https://rdrr.io/r/base/mean.html">mean</a></span>(evaluation <span class="op">==</span><span class="st"> "Error"</span>, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>))</span>
<span id="cb16-4"><a href="#cb16-4"></a><span class="co">#&gt; # A tibble: 8 x 3</span></span>
<span id="cb16-5"><a href="#cb16-5"></a><span class="co">#&gt;   team            N_receptions error_rate</span></span>
<span id="cb16-6"><a href="#cb16-6"></a><span class="co">#&gt;   &lt;chr&gt;                  &lt;int&gt;      &lt;dbl&gt;</span></span>
<span id="cb16-7"><a href="#cb16-7"></a><span class="co">#&gt; 1 ACH Volley                32     0.0312</span></span>
<span id="cb16-8"><a href="#cb16-8"></a><span class="co">#&gt; 2 Aich/Dob                  86     0.0233</span></span>
<span id="cb16-9"><a href="#cb16-9"></a><span class="co">#&gt; 3 Br.Maribor                61     0.0328</span></span>
<span id="cb16-10"><a href="#cb16-10"></a><span class="co">#&gt; 4 Braslovče                103     0.233 </span></span>
<span id="cb16-11"><a href="#cb16-11"></a><span class="co">#&gt; 5 Hypo Tirol                98     0.0816</span></span>
<span id="cb16-12"><a href="#cb16-12"></a><span class="co">#&gt; 6 Kamnik                    69     0.0290</span></span>
<span id="cb16-13"><a href="#cb16-13"></a><span class="co">#&gt; 7 Maribor                   64     0.188 </span></span>
<span id="cb16-14"><a href="#cb16-14"></a><span class="co">#&gt; 8 Nova KBM Branik          153     0.131</span></span></code></pre></div>
</div>
</div>
<div id="troubleshooting" class="section level2">
<h2 class="hasAnchor">
<a href="#troubleshooting" class="anchor"></a>Troubleshooting</h2>
<p>If you see unexpected behaviour, try <code><a href="reference/read_dv.html">read_dv(..., do_warn = TRUE)</a></code> to obtain more diagnostic information during the process of reading and parsing the DataVolley file. Also check the text encoding specified to <code>read_dv</code> (did you specify one??)</p>
</div>
<div id="more" class="section level2">
<h2 class="hasAnchor">
<a href="#more" class="anchor"></a>More</h2>
<p>For more information about DataVolley, see <a href="http://www.dataproject.com/IT/en/Volleyball" class="uri">http://www.dataproject.com/IT/en/Volleyball</a>.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li>
<a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a>
</li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Ben Raymond <br><small class="roles"> Author, maintainer </small>  </li>
</ul>
</div>

  </div>
</div>


      <footer><div class="copyright">
  <p>Developed by Ben Raymond.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
